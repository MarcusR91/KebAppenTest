import axios, { AxiosResponse } from "axios";
import { useEffect, useState } from "react"
import GenericList from "../utils/GenreicList";
import { OrderCreationDto } from "./Models/order.model";

export const FilterOrders = () => {

    const [orders, setOrders] = useState<OrderCreationDto[]>();


    useEffect(() => {
        loadOrders();
    }, [])

    const loadOrders = () => {
        axios.get("https://localhost:7117/api/Order")
            .then((response: AxiosResponse<OrderCreationDto[]>) => {
                setOrders(response.data);
            })
    }

    return (
        <>
            <h3>Alla ordrar</h3>

            <GenericList list={orders}>
                <table className="table table-striped">
                    <thead>
                        <tr>
                            <th>Namn:</th>
                            <th>Ant√§llningsnummer:</th>
                            <th>Kebab:</th>
                            <th>Dricka:</th>
                        </tr>
                    </thead>
                    <tbody>{orders?.map((order,index) =>
                        <tr key={index}>
                            <td>{order.firstName} {order.lastName}</td>
                            <td>{order.empNr}</td>
                            <td>{order.name}</td>
                            <td>{order.typeOfDrink}</td>
                        </tr>
                    )}
                    </tbody>
                </table>
            </GenericList>
        </>
    )
}