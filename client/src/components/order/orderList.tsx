import axios, { AxiosResponse } from "axios";
import { useEffect, useState } from "react";
import GenericList from "../utils/GenreicList";
import { SummedOrderDto } from "./Models/order.model"
export const OrderList = () => {

    const [summedOrder, setSummedOrder] = useState<SummedOrderDto[]>();

    useEffect(()=>{
        loadOrders();
    })
     
    const loadOrders = () => {
        axios.get("https://localhost:7117/api/Order/kebabs")
            .then((response: AxiosResponse<SummedOrderDto[]>) => {
                setSummedOrder(response.data);
            })
    }

    return(
        <div>
            <h1>Summurized Order</h1>
            <GenericList list={summedOrder}>
                <table className="table table-striped">
                    <thead>
                        <tr>
                            <th>Kebab:</th>
                            <th>Antal:</th>
                        </tr>
                    </thead>
                    <tbody>{summedOrder?.map((order,index) =>
                        <tr key={index}>
                            <td>{order.name}</td>
                            <td>{order.count}</td>
                        </tr>
                    )}
                    </tbody>
                </table>
            </GenericList>
        </div>
    )
}


