import axios from "axios";
import { useHistory } from "react-router-dom";
import { OrderDto } from "./Models/order.model";
import { OrderForm } from "./Orderform";

export const CreateOrder = () => {

    const history = useHistory()

    const  CreateNewOrder = async (order: OrderDto) =>{
        try {
            await axios.post('https://localhost:7117/api/Order', order);
            console.log(order)
            history.push("/orders");
    
        } catch (error) {
            console.error(error);
        }
    }

    return(


        <>
            <h3>Create Order</h3>

            <OrderForm model={{firstName: '', lastName: '', empNr: 0}}
                onSubmit={values => CreateNewOrder(values)}
            />

        </>
    )
}