import axios from "axios";
import { useHistory } from "react-router-dom";
import { urlOrders } from "../../Endpoints";
import { OrderCreationDto } from "./Models/order.model";
import { OrderForm } from "./Orderform";

export const CreateOrder = () => {

    const history = useHistory()

    const CreateNewOrder = async (order: OrderCreationDto) => {
        const config = {
            headers: { 'Content-Type': 'application/json' }
        }
        try {
            await axios.post(urlOrders, order, config);
            console.log(order)
            history.push("/orders/filter");

        } catch (error) {
            console.error(error);
        }
    }

    return (


        <>
            <h3>LÃ¤gg till Order</h3>
            <OrderForm model={{ id: 0, firstName: '', lastName: '', empNr: 0 }}
                onSubmit={values =>
                    CreateNewOrder(values)
                }
            />
        </>
    )
}